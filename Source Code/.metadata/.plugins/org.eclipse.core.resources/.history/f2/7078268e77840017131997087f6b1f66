package com.reyzerbit.guis;

import java.awt.Color;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.Field;
import java.util.HashMap;
import java.util.Map;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

import com.reyzerbit.Feats;

public class ConsoleGUI {
	
	//Frame
	public static JFrame consoleGUI = new JFrame();
	
	//Text Area and Scroll
	public static JTextArea outputWindow = new JTextArea();
	static JScrollPane scroll = new JScrollPane(outputWindow);
	public static JTextField inputWindow = new JTextField();
	
	//Input
	
	//Buttons
	static JButton enter = new JButton("Enter");
		
	public static void initConsole(){
			
		outputWindow.setText("");
		
		consoleGUI.getContentPane().setLayout(null);
		consoleGUI.setVisible(true);
		consoleGUI.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		consoleGUI.setSize(300, 400);
		consoleGUI.setName("Console");
		consoleGUI.setTitle("Console");
		consoleGUI.setResizable(false);
		consoleGUI.setLocationRelativeTo(null);
		consoleGUI.getRootPane().setDefaultButton(enter);
		
		enter.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2, true));
		enter.setOpaque(true);
		enter.setBackground(Color.LIGHT_GRAY);
		
		addComponent(consoleGUI, scroll, 10, 10, 280, 280);
		addComponent(consoleGUI, inputWindow, 10, 300, 280, 20);
		addComponent(consoleGUI, enter, 120, 335, 60, 30);
			
		inputWindow.requestFocus();
		
		//Add Listener for Enter Button
		enter.addActionListener(new ActionListener() {

			@Override
					
			public void actionPerformed(ActionEvent e) {
				
				String input = inputWindow.getText();
				
				String[] lineArray = input.split(" ");
				
				//Start Combat Command
				if(lineArray[0].equals("startCombat") && lineArray.length == 4){
					
					int combatSliderSpeed = Integer.parseInt(lineArray[1]);
					int combatEnemyHealth = Integer.parseInt(lineArray[2]);
					int combatEnemyStrength = Integer.parseInt(lineArray[3]);
					
					CombatGUI.initCombat(combatSliderSpeed, combatEnemyHealth, combatEnemyStrength);
					consoleGUI.dispose();
					
				}else if(lineArray[0].equals("startCombat") && lineArray.length != 4){
					
					outputWindow.append("This command is used like this:\nstartCombat [slider speed] [enemy health] [enemy strength]\n\n");
				
				//Decrease health command
					
				}else if(lineArray[0].equals("decreaseHealth") && lineArray.length == 2){
					
					Feats.health = Feats.health - (Integer.parseInt(lineArray[1]));
					outputWindow.append("Decreased health by " + lineArray[1] + "\n\n");
					Feats.resetStat();
					
				}else if(lineArray[0].equals("decreaseHealth") && lineArray.length != 2){
					
					outputWindow.append("You need to enter the command like this:\n\ndecreaseHealth [decrease amount]\n\n");
					
				//Increase health command
					
				}else if(lineArray[0].equals("increaseHealth") && lineArray.length == 2){
					
					Feats.health = Feats.health + (Integer.parseInt(lineArray[1]));
					outputWindow.append("Increased health by " + lineArray[1] + "\n\n");
					Feats.resetStat();
					
				}else if(lineArray[0].equals("increaseHealth") && lineArray.length != 2){
					
					outputWindow.append("You need to enter the command like this:\n\nincreaseHealth [decrease amount]\n\n");
					
				}else if(lineArray[0].equals("setVal") && lineArray.length == 3){
					
					//FIX IT DANGIT
					
					this.getClass().getField("Feats." + lineArray[1]).set(this,Boolean.TRUE);
					Feats.resetStat();
					
				}else if(lineArray[0].equals("setVal") && lineArray.length != 3){
					
					outputWindow.append("You need to enter the command like this:\n\nsetVal [value to reset] [value]\n\n");
					
				}else{
					
					outputWindow.append("Unknown Command\n\n");
					outputWindow.append(Integer.toString(lineArray.length));
					
				}
				
				inputWindow.setText("");
						
			}
					
		});
				
	}
	
	
	//Method to add component to GUI.
	
	private static void addComponent(JFrame frame, Component component, int posx, int posy, int width, int height){
		
		component.setBounds(posx, posy, width, height);
		frame.getContentPane().add(component);
	
	}

}
